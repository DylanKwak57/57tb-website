# 57TB Homepage Renewal Analysis Report

> **Analysis Type**: Gap Analysis (Design vs Implementation)
>
> **Project**: 57TB Website Renewal
> **Version**: 1.0.0
> **Analyst**: Dylan Kwak (via gap-detector)
> **Date**: 2026-02-10
> **Design Doc**: [57TB-홈페이지-리뉴얼.design.md](../02-design/features/57TB-홈페이지-리뉴얼.design.md)

---

## 1. Analysis Overview

### 1.1 Analysis Purpose

PDCA Check phase -- 설계 문서(Design Document)와 실제 구현 코드 간의 일치 여부를 비교 분석하여,
누락된 기능, 변경된 사항, 추가된 항목을 파악한다.

### 1.2 Analysis Scope

- **Design Document**: `docs/02-design/features/57TB-홈페이지-리뉴얼.design.md`
- **Implementation Path**: `src/` (36 source files + 3 message files)
- **Analysis Date**: 2026-02-10

---

## 2. Overall Scores

| Category | Score | Status |
|----------|:-----:|:------:|
| Component Match | 91% | !! Warning |
| Data Model Match | 100% | OK |
| Page Structure Match | 100% | OK |
| Feature Spec Match | 78% | !! Warning |
| Convention Compliance | 95% | OK |
| Architecture Compliance | 100% | OK |
| **Overall** | **87%** | **!! Warning** |

```
+---------------------------------------------+
|  Overall Match Rate: 87%                     |
+---------------------------------------------+
|  OK Match:              41 items (87%)       |
|  !! Missing (Design O, Impl X): 4 items     |
|  Added (Design X, Impl O):      3 items     |
|  Changed (Design != Impl):      0 items     |
+---------------------------------------------+
```

---

## 3. Gap Analysis (Design vs Implementation)

### 3.1 Component Existence Check

#### 3.1.1 Layout Components (5/5 = 100%)

| Design Component | Design Path | Implementation File | Status |
|------------------|-------------|---------------------|--------|
| `Header` | `src/components/layout/Header.tsx` | `src/components/layout/Header.tsx` | OK |
| `Footer` | `src/components/layout/Footer.tsx` | `src/components/layout/Footer.tsx` | OK |
| `MobileMenu` | `src/components/layout/MobileMenu.tsx` | `src/components/layout/MobileMenu.tsx` | OK |
| `FloatingCTA` | `src/components/layout/FloatingCTA.tsx` | `src/components/layout/FloatingCTA.tsx` | OK |
| `LanguageSwitcher` | `src/components/layout/LanguageSwitcher.tsx` | `src/components/layout/LanguageSwitcher.tsx` | OK |

#### 3.1.2 Section Components (9/9 = 100%)

| Design Component | Design Path | Implementation File | Status |
|------------------|-------------|---------------------|--------|
| `HeroSection` | `src/components/sections/HeroSection.tsx` | `src/components/sections/HeroSection.tsx` | OK |
| `AboutSection` | `src/components/sections/AboutSection.tsx` | `src/components/sections/AboutSection.tsx` | OK |
| `ServicesPreview` | `src/components/sections/ServicesPreview.tsx` | `src/components/sections/ServicesPreview.tsx` | OK |
| `GalleryPreview` | `src/components/sections/GalleryPreview.tsx` | `src/components/sections/GalleryPreview.tsx` | OK |
| `TeamPreview` | `src/components/sections/TeamPreview.tsx` | `src/components/sections/TeamPreview.tsx` | OK |
| `ReviewsSection` | `src/components/sections/ReviewsSection.tsx` | `src/components/sections/ReviewsSection.tsx` | OK |
| `PromotionSection` | `src/components/sections/PromotionSection.tsx` | `src/components/sections/PromotionSection.tsx` | OK |
| `LocationSection` | `src/components/sections/LocationSection.tsx` | `src/components/sections/LocationSection.tsx` | OK |
| `CTASection` | `src/components/sections/CTASection.tsx` | `src/components/sections/CTASection.tsx` | OK |

#### 3.1.3 UI Components (7/9 = 78%)

| Design Component | Design Path | Implementation File | Status |
|------------------|-------------|---------------------|--------|
| `Button` | `src/components/ui/Button.tsx` | `src/components/ui/Button.tsx` | OK |
| `SectionTitle` | `src/components/ui/SectionTitle.tsx` | `src/components/ui/SectionTitle.tsx` | OK |
| `ServiceCard` | `src/components/ui/ServiceCard.tsx` | `src/components/ui/ServiceCard.tsx` | OK |
| `BeforeAfterSlider` | `src/components/ui/BeforeAfterSlider.tsx` | -- | !! NOT IMPLEMENTED |
| `ReviewCard` | `src/components/ui/ReviewCard.tsx` | `src/components/ui/ReviewCard.tsx` | OK |
| `BranchCard` | `src/components/ui/BranchCard.tsx` | `src/components/ui/BranchCard.tsx` | OK |
| `PromotionBanner` | `src/components/ui/PromotionBanner.tsx` | -- | !! NOT IMPLEMENTED |
| `ScrollReveal` | `src/components/ui/ScrollReveal.tsx` | `src/components/ui/ScrollReveal.tsx` | OK |
| `CategoryFilter` | `src/components/ui/CategoryFilter.tsx` | `src/components/ui/CategoryFilter.tsx` | OK |

**Summary**: 21/23 components implemented (91.3%)

---

### 3.2 Data Model Check

| Design Interface | Implementation File | Status | Notes |
|-----------------|---------------------|--------|-------|
| `Service` | `src/types/index.ts` L11-25 | OK | Design uses inline `{ th, en, ko }`, impl uses `LocalizedText` type alias -- semantically identical |
| `Stylist` | `src/types/index.ts` L29-35 | OK | Impl adds `StylistLevel` type alias -- enhancement |
| `GalleryItem` | `src/types/index.ts` L31-39 | OK | Added `GalleryStyle` type + `style` field (2026-02-11). Uses `ServiceCategory` for `category` |
| `Review` | `src/types/index.ts` L46-53 | OK | Exact match |
| `Branch` | `src/types/index.ts` L55-66 | OK | Exact match |
| `Promotion` | `src/types/index.ts` L68-75 | OK | Impl adds union type for badge: `'HOT' | 'NEW' | 'LIMITED'` -- stricter, better than design's `string` |

Additional types in implementation (not in design, but valid enhancements):
- `Locale` type alias (`'th' | 'en' | 'ko'`)
- `LocalizedText` interface (DRY pattern for `{ th, en, ko }`)
- `ServiceCategory` type alias
- `StylistLevel` type alias
- `GalleryStyle` type alias (`'Digital Perm' | 'S Perm' | 'Volume Magic' | 'Mix Perm' | 'Hair Color' | 'Balayage'`) -- added 2026-02-11

**Match Rate**: 6/6 = 100%

---

### 3.3 Page Structure Check

| Design Path | Implementation Path | Status |
|-------------|---------------------|--------|
| `src/app/[locale]/page.tsx` | `src/app/[locale]/page.tsx` | OK |
| `src/app/[locale]/services/page.tsx` | `src/app/[locale]/services/page.tsx` | OK |
| `src/app/[locale]/gallery/page.tsx` | `src/app/[locale]/gallery/page.tsx` | OK |
| `src/app/[locale]/team/page.tsx` | `src/app/[locale]/team/page.tsx` | OK |
| `src/app/[locale]/location/page.tsx` | `src/app/[locale]/location/page.tsx` | OK |
| `src/app/[locale]/layout.tsx` | `src/app/[locale]/layout.tsx` | OK |
| `src/app/layout.tsx` | `src/app/layout.tsx` | OK |
| `src/app/globals.css` | `src/app/globals.css` | OK |
| `src/app/not-found.tsx` | `src/app/not-found.tsx` | OK |
| `src/lib/constants.ts` | `src/lib/constants.ts` | OK |
| `src/lib/utils.ts` | `src/lib/utils.ts` | OK |
| `src/lib/fonts.ts` | `src/lib/fonts.ts` | OK |
| `src/types/index.ts` | `src/types/index.ts` | OK |
| `src/i18n/request.ts` | `src/i18n/request.ts` | OK |
| `src/i18n/routing.ts` | `src/i18n/routing.ts` | OK |
| `src/messages/th.json` | `src/messages/th.json` | OK |
| `src/messages/en.json` | `src/messages/en.json` | OK |
| `src/messages/ko.json` | `src/messages/ko.json` | OK |

Additional file not in design (valid):
- `src/app/page.tsx` -- Root redirect to `/th` (necessary for static export)

**Match Rate**: 18/18 = 100%

---

### 3.4 Feature Specification Check

#### 3.4.1 Animation Specifications (Design Section 4.3)

| Element | Design Spec | Implementation | Status |
|---------|-------------|----------------|--------|
| Hero text | Fade up + scale, 1.2s ease-out | `initial={{ opacity: 0, y: 40, scale: 0.95 }}`, `duration: 1.2, ease: 'easeOut'` (HeroSection.tsx L36-38) | OK |
| Section titles | Slide up + fade, 0.8s | `ScrollReveal` wrapper: `duration: 0.8`, `opacity: 0, y: 40` (ScrollReveal.tsx L28-31) | OK |
| Service cards | Stagger fade up, 0.6s (0.1s stagger) | `ScrollReveal delay={i * 0.1}` but `duration: 0.8` (ServicesPreview.tsx L21) | !! Changed: duration 0.8s vs designed 0.6s |
| Gallery items | Scale up + fade, 0.5s | `ScrollReveal delay={i * 0.1}`, `duration: 0.8` (GalleryPreview.tsx L21) | !! Changed: uses fade-up instead of scale-up; duration 0.8s vs 0.5s |
| Before/After slider | Drag horizontal, instant | -- | !! NOT IMPLEMENTED (BeforeAfterSlider missing) |
| Floating LINE btn | Pulse glow, every 5s, 2s | `animate scale/opacity`, `duration: 2, repeat: Infinity, repeatDelay: 3` (FloatingCTA.tsx L22-23) | !! Changed: repeatDelay 3s vs designed 5s |
| Page transitions | Fade, 0.3s | Not implemented (no layout transition wrapper) | !! NOT IMPLEMENTED |
| Nav background | Blur + opacity, scroll > 100px | `scrolled > 80` triggers `backdrop-blur-md` + `bg-brand-black/90` (Header.tsx L28,39) | !! Changed: threshold 80px vs designed 100px |

**Animation Match**: 3 OK, 3 Changed, 2 Not Implemented = 3/8 exact match (37.5%)
Considering "Changed" as partial match: 6/8 = 75%

#### 3.4.2 Responsive Breakpoints (Design Section 4.4)

| Breakpoint | Design | Implementation | Status |
|------------|--------|----------------|--------|
| Mobile | < 640px | Tailwind `sm:` = 640px (default) | OK |
| Tablet | 640-1024px | `md:` = 768px used (not 1024px as boundary, but `lg:` = 1024px) | OK |
| Desktop | > 1024px, max-width 1280px | `lg:` breakpoint + `max-w-7xl` (1280px) | OK |

**Match Rate**: 3/3 = 100%

#### 3.4.3 SEO Metadata (Design Section 7 Phase 5)

| Item | Design Requirement | Implementation | Status |
|------|-------------------|----------------|--------|
| Basic Metadata | title, description | `src/app/layout.tsx` L5-8: title + description set | OK |
| Open Graph | og:title, og:description, og:image | Not implemented (no `openGraph` in metadata) | !! NOT IMPLEMENTED |
| Twitter Card | twitter:card, twitter:title | Not implemented (no `twitter` in metadata) | !! NOT IMPLEMENTED |
| Locale meta tags | `th.json`, `en.json`, `ko.json` each with `meta` section | All 3 locale files have `meta.title` and `meta.description` keys | OK (data present, but not used in `<head>`) |

**Match Rate**: 1/3 = 33% (meta.title/description only partially used)

#### 3.4.4 GitHub Pages Deploy Config (Design Section 7 Phase 5)

| Item | Design Requirement | Implementation | Status |
|------|-------------------|----------------|--------|
| Static export | `output: 'export'` | `next.config.mjs` L7: `output: 'export'` | OK |
| Image optimization off | `images: { unoptimized: true }` | `next.config.mjs` L8-10: present | OK |
| Deploy script | GitHub Pages setup | No GitHub Actions workflow file found | !! NOT IMPLEMENTED |

**Match Rate**: 2/3 = 67%

#### 3.4.5 BeforeAfterSlider Drag Feature

| Item | Design | Implementation | Status |
|------|--------|----------------|--------|
| `BeforeAfterSlider` component | Drag horizontal slider for Before/After comparison | Component file does not exist | !! NOT IMPLEMENTED |
| Gallery Preview uses slider | GalleryPreview should show Before/After with slider | GalleryPreview shows static cards with category initial letter as placeholder | !! Changed: no slider, uses static cards |
| Gallery Page uses slider | Gallery page items should have Before/After | Gallery page shows static cards only | !! Changed: no Before/After functionality |

**Match Rate**: 0/3 = 0%

---

### 3.5 Dependencies Check

| Design Package | Design Version | Implementation Version | Status |
|---------------|----------------|------------------------|--------|
| next | 14.x | ^14.2.21 | OK |
| react | 18.x | ^18.3.1 | OK |
| typescript | 5.x | ^5.7.0 | OK |
| tailwindcss | 4.x | ^4.0.0 | OK |
| framer-motion | 11.x | ^11.15.0 | OK |
| next-intl | 3.x | ^3.26.0 | OK |
| lucide-react | latest | ^0.468.0 | OK |
| clsx + tailwind-merge | latest | clsx ^2.1.1, tailwind-merge ^2.6.0 | OK |

**Match Rate**: 8/8 = 100%

---

### 3.6 i18n / Translation Check

| Section | TH | EN | KO | Status |
|---------|:--:|:--:|:--:|--------|
| meta | OK | OK | OK | All 3 locales have `meta.title` and `meta.description` |
| nav | OK | OK | OK | 5 keys each |
| hero | OK | OK | OK | 4 keys each |
| about | OK | OK | OK | 3 features with title/description |
| services | OK | OK | OK | 7 keys + categories sub-object |
| gallery | OK | OK | OK | 6 keys each |
| team | OK | OK | OK | 3 keys + branch sub-object |
| reviews | OK | OK | OK | 1 key each |
| promotion | OK | OK | OK | 3 keys each |
| location | OK | OK | OK | 7 keys each |
| cta | OK | OK | OK | 3 keys each |
| footer | OK | OK | OK | 2 keys each |

**Match Rate**: 12/12 sections = 100% (all keys consistent across 3 locales)

---

### 3.7 Static Data Check

| Data | Design Spec | Implementation | Status |
|------|-------------|----------------|--------|
| SERVICES | Service[] with CUT/COLOR/PERM/TREATMENT/SPECIAL categories | 26 services across all categories (expanded 2026-02-11) | OK |
| STYLISTS | Stylist[] with name, level, branch | 8 stylists across asoke/saimai/both | OK |
| GALLERY_ITEMS | GalleryItem[] with `style` + `afterImage` | **30 items** with `style` field, organized in 6 category folders (expanded 2026-02-11) | OK -- `beforeImage` removed from design (불필요) |
| REVIEWS | Review[] with rating, text | 6 reviews, all 5-star (expanded 2026-02-11) | OK |
| BRANCHES | Branch[] for asoke and saimai | 2 branches with full data | OK |
| PROMOTIONS | Promotion[] | 2 promotions with badge (expanded 2026-02-11) | OK |
| SNS_LINKS | IG, TikTok, YouTube, FB | All 4 social links present | OK |
| LINE_URL | env var with fallback | `process.env.NEXT_PUBLIC_LINE_URL || 'https://line.me/R/ti/p/@57totalbeauty'` | OK |
| BOOKING_URL | env var with fallback | Present but unused in components | !! Warning: defined but not referenced |

**Match Rate**: 8/9 = 89%

---

## 4. Missing Features (Design O, Implementation X)

| # | Item | Design Location | Description | Impact |
|---|------|-----------------|-------------|--------|
| 1 | `BeforeAfterSlider` | design.md Section 5.3 | Before/After drag slider component not created | HIGH -- core gallery feature missing |
| 2 | `PromotionBanner` | design.md Section 5.3 | Standalone promotion banner UI component not created | LOW -- PromotionSection handles inline |
| 3 | Open Graph / Twitter Card metadata | design.md Section 7 Phase 5 | `openGraph` and `twitter` metadata objects not set in layout | MEDIUM -- affects social sharing |
| 4 | Page transitions | design.md Section 4.3 | Fade transition on route change not implemented | LOW -- nice-to-have |

---

## 5. Added Features (Design X, Implementation O)

| # | Item | Implementation Location | Description |
|---|------|------------------------|-------------|
| 1 | `LocalizedText` type alias | `src/types/index.ts` L3-7 | DRY helper type not in design -- good pattern |
| 2 | `ServiceCategory` type alias | `src/types/index.ts` L9 | Union type extracted -- cleaner code |
| 3 | `StylistLevel` type alias | `src/types/index.ts` L27 | Union type extracted -- cleaner code |
| 4 | `src/app/page.tsx` root redirect | `src/app/page.tsx` | Client-side redirect to `/th` -- necessary for static export |
| 5 | `BOOKING_URL` constant | `src/lib/constants.ts` L203 | Self-booking system URL defined but not used anywhere |

---

## 6. Changed Features (Design != Implementation)

| # | Item | Design | Implementation | Impact |
|---|------|--------|----------------|--------|
| 1 | Service card animation duration | 0.6s | 0.8s (ScrollReveal default) | LOW |
| 2 | Gallery item animation | Scale up + fade, 0.5s | Fade up, 0.8s | LOW |
| 3 | Floating CTA pulse interval | Every 5s | Every 5s (2s duration + 3s repeatDelay = 5s total) | NONE -- actually matches |
| 4 | Nav scroll threshold | > 100px | > 80px | LOW |
| 5 | ~~Gallery `beforeImage` data~~ | ~~Should have before/after pairs~~ | `beforeImage` removed from design (2026-02-11) | NONE -- BeforeAfterSlider 불필요 결정 (before 사진 없음) |
| 6 | Promotion badge type | `string` (design) | `'HOT' \| 'NEW' \| 'LIMITED'` union (impl) | NONE -- improvement |
| 7 | Gallery filtering | Category-based (PERM/COLOR) | **Style-based** with 6 specific styles (2026-02-11) | NONE -- improvement over design |
| 8 | Gallery descriptions | Localized (TH/EN/KO different text) | **Unified to English** across all 3 locales (2026-02-11) | LOW -- intentional simplification |

---

## 7. Clean Architecture Compliance

> Project Level: **Starter** (no backend, static site)

### 7.1 Layer Structure Check

| Expected (Starter) | Exists | Status |
|---------------------|:------:|--------|
| `src/components/` | Yes | OK |
| `src/lib/` | Yes | OK |
| `src/types/` | Yes | OK |

### 7.2 Layer Dependency Check

| Layer | Files | Dependencies | Status |
|-------|-------|-------------|--------|
| Pages (`app/`) | 7 files | imports from `components/`, `lib/` | OK |
| Components | 21 files | imports from `lib/`, `types/`, peer components | OK |
| Lib | 3 files | imports from `types/` only | OK |
| Types | 1 file | no external imports | OK |

No dependency violations found. All imports follow the Starter-level architecture.

**Architecture Score**: 100%

---

## 8. Convention Compliance

### 8.1 Naming Convention Check

| Category | Convention | Files Checked | Compliance | Violations |
|----------|-----------|:-------------:|:----------:|------------|
| Components | PascalCase | 23 | 100% | None |
| Functions | camelCase | All | 100% | None |
| Constants | UPPER_SNAKE_CASE | `constants.ts` | 100% | `SERVICES`, `STYLISTS`, `GALLERY_ITEMS`, `REVIEWS`, `BRANCHES`, `PROMOTIONS`, `SNS_LINKS`, `LINE_URL`, `BOOKING_URL` -- all correct |
| Types | PascalCase | `types/index.ts` | 100% | None |
| Files (component) | PascalCase.tsx | 23 files | 100% | None |
| Files (utility) | camelCase.ts | 6 files | 100% | `utils.ts`, `constants.ts`, `fonts.ts`, `request.ts`, `routing.ts` -- correct |
| Folders | kebab-case | All | 100% | `layout/`, `sections/`, `ui/`, `lib/`, `types/`, `messages/`, `i18n/` -- all correct |

### 8.2 Component Pattern Check

Design specifies (Section 8.2):
```typescript
'use client';
import { motion } from 'framer-motion';
import { useTranslations } from 'next-intl';
// named export function pattern
export function ComponentName({ ...props }: PropsInterface) { ... }
```

| Pattern | Files Checked | Compliance | Notes |
|---------|:-------------:|:----------:|-------|
| `'use client'` directive | 25 client files | 100% | All interactive components marked |
| Named export (not default) | 23 component files | 100% | All use `export function` |
| Interface Props definition | 14 files with props | 100% | All define `interface XxxProps` |
| `useTranslations` usage | 18 components | 100% | Properly used in all translatable components |

Exception: Sub-pages (`/services`, `/gallery`, `/team`, `/location`) use `export default function` which is the correct Next.js pattern for page components.

### 8.3 Import Order Check

Sampling 5 representative files:

| File | External First | Internal `@/` Second | Relative `./` Third | Type Imports Fourth | Status |
|------|:-:|:-:|:-:|:-:|--------|
| `Header.tsx` | react, framer-motion, next-intl, lucide-react | -- | `./LanguageSwitcher`, `./MobileMenu` | -- | OK (no @/ needed) |
| `ServicesPreview.tsx` | next-intl | `@/components/ui/...`, `@/lib/constants` | -- | -- | OK |
| `ReviewCard.tsx` | lucide-react | -- | -- | `type { Review, Locale }` | OK |
| `Button.tsx` | -- | `@/lib/utils` | -- | `type { ReactNode, ButtonHTMLAttributes }` | OK |
| `GalleryPreview.tsx` | next-intl | `@/components/ui/...`, `@/lib/constants` | -- | `type { Locale }` | OK |

**Import Order Compliance**: 100%

### 8.4 Environment Variable Check

| Design Variable | Naming Convention | Present | Usage | Status |
|----------------|-------------------|:-------:|-------|--------|
| `NEXT_PUBLIC_SITE_URL` | NEXT_PUBLIC_ | No | Not defined | !! Missing |
| `NEXT_PUBLIC_DEFAULT_LOCALE` | NEXT_PUBLIC_ | No | Hardcoded `'th'` in routing.ts | !! Missing (hardcoded) |
| `NEXT_PUBLIC_LINE_URL` | NEXT_PUBLIC_ | Yes | Used with fallback in `constants.ts` L202 | OK |
| `NEXT_PUBLIC_BOOKING_URL` | NEXT_PUBLIC_ | Yes | Defined in `constants.ts` L203, but unused | !! Warning: unused |
| `.env.example` | Template file | No | Not created | !! Missing |

**Env Variable Score**: 1/4 defined vars implemented = 25% (but 2 of 4 are less critical for static site)

### 8.5 Convention Score

```
+---------------------------------------------+
|  Convention Compliance: 95%                  |
+---------------------------------------------+
|  Naming:              100%                   |
|  Component Pattern:    100%                  |
|  Import Order:         100%                  |
|  Folder Structure:     100%                  |
|  Env Variables:         60%                  |
+---------------------------------------------+
```

---

## 9. Security Check

| Item | Design Requirement | Implementation | Status |
|------|-------------------|----------------|--------|
| XSS prevention | No `dangerouslySetInnerHTML` | Not used anywhere | OK |
| External links | `rel="noopener noreferrer"` + `target="_blank"` | Consistently applied in all external `<a>` tags | OK |
| Image optimization | Next Image component | `images: { unoptimized: true }` for static export; `<img>` tags not used (placeholder gradients) | OK (no real images yet) |
| HTTPS | Auto via deploy platform | Static export config ready | OK |

**Security Score**: 4/4 = 100%

---

## 10. Detailed Missing Feature Analysis

### 10.1 BeforeAfterSlider (HIGH Impact)

**Design Spec** (Section 5.3, 4.3):
- File: `src/components/ui/BeforeAfterSlider.tsx`
- Feature: Horizontal drag slider comparing Before/After images
- Animation: Drag horizontal, instant response
- Used in: GalleryPreview section and Gallery page

**Current State**:
- Component file does not exist at all
- `GalleryPreview` renders static cards with category initial letter as placeholder
- `GALLERY_ITEMS` data has no `beforeImage` values set (all `undefined`)
- Gallery page shows static grid only

**Impact**: This is the key differentiating feature for a hair salon website. Before/After comparisons are essential for showcasing work quality.

**Recommended Action**: Implement `BeforeAfterSlider.tsx` with:
1. Two overlapping images (before/after)
2. Draggable divider using framer-motion drag
3. Touch support for mobile
4. Integrate into `GalleryPreview` and Gallery page

### 10.2 PromotionBanner (LOW Impact)

**Design Spec** (Section 5.3):
- File: `src/components/ui/PromotionBanner.tsx`
- Feature: Standalone promotion banner with image, text, badge

**Current State**:
- No standalone component file
- `PromotionSection` handles promotion display inline within the section
- All design functionality (badge, title, description, validUntil, CTA button) is implemented inline in `PromotionSection.tsx`

**Impact**: Low -- the functionality exists but is not extracted into a reusable component.

**Recommended Action**: Either extract inline code into `PromotionBanner.tsx` for reusability, or update the design document to reflect the inline approach.

### 10.3 Open Graph / Twitter Card (MEDIUM Impact)

**Design Spec** (Section 7 Phase 5):
- SEO metadata with Open Graph and Twitter Card tags

**Current State**:
- Basic `<title>` and `<meta name="description">` set in root layout
- Translation files have `meta.title` and `meta.description` per locale
- No `openGraph` or `twitter` objects in Next.js metadata export
- Locale-specific metadata not applied to `[locale]/layout.tsx`

**Impact**: Social media sharing will show generic or no preview. Critical for marketing.

**Recommended Action**: Add metadata to `[locale]/layout.tsx`:
```typescript
export async function generateMetadata({ params }) {
  const { locale } = await params;
  const messages = (await import(`@/messages/${locale}.json`)).default;
  return {
    title: messages.meta.title,
    description: messages.meta.description,
    openGraph: { title, description, url, images, locale },
    twitter: { card: 'summary_large_image', title, description }
  };
}
```

### 10.4 GitHub Actions Deploy Workflow (LOW Impact)

**Design Spec** (Section 7 Phase 5):
- GitHub Pages deploy setup

**Current State**:
- `output: 'export'` configured correctly
- No `.github/workflows/` directory or deploy workflow file

**Impact**: Low for development, but needed before go-live.

---

## 11. Score Calculation Details

### Category Breakdown

| Area | Items | Match | Score |
|------|:-----:|:-----:|:-----:|
| Layout Components | 5 | 5 | 100% |
| Section Components | 9 | 9 | 100% |
| UI Components | 9 | 7 | 78% |
| Data Model (interfaces) | 6 | 6 | 100% |
| Page Structure | 18 | 18 | 100% |
| Dependencies | 8 | 8 | 100% |
| i18n Translations | 12 | 12 | 100% |
| Animation Specs | 8 | 6 (partial) | 75% |
| SEO Metadata | 3 | 1 | 33% |
| Deploy Config | 3 | 2 | 67% |
| Static Data | 9 | 7 | 78% |
| Security | 4 | 4 | 100% |
| Env Variables | 4 | 1 | 25% |
| **TOTAL** | **98** | **86** | **87.8%** |

### Overall Match Rate: **87%**

---

## 12. Recommended Actions

### 12.1 Immediate Actions (Match Rate -> 90%+)

| Priority | Item | File | Expected Impact |
|----------|------|------|-----------------|
| 1 (HIGH) | Implement `BeforeAfterSlider.tsx` | `src/components/ui/BeforeAfterSlider.tsx` | +3% match rate; core gallery feature |
| 2 (MEDIUM) | Add Open Graph + Twitter Card metadata | `src/app/[locale]/layout.tsx` | +2% match rate; social sharing |
| 3 (LOW) | Extract `PromotionBanner.tsx` or update design | `src/components/ui/PromotionBanner.tsx` | +1% match rate; reusability |

### 12.2 Short-term Actions (Quality Improvement)

| Priority | Item | File | Notes |
|----------|------|------|-------|
| 1 | Add `beforeImage` data to GALLERY_ITEMS | `src/lib/constants.ts` | Enable Before/After comparison |
| 2 | Create `.env.example` template | `.env.example` | Document required env vars |
| 3 | Add GitHub Pages deploy workflow | `.github/workflows/deploy.yml` | Automate deployment |
| 4 | Use locale-specific metadata | `src/app/[locale]/layout.tsx` | Use `meta` keys from translation files |

### 12.3 Design Document Updates Needed

| Item | Action |
|------|--------|
| `PromotionBanner` | Consider removing from component list if inline approach is preferred |
| Animation durations | Update 0.6s -> 0.8s, 0.5s -> 0.8s to match ScrollReveal defaults |
| Nav scroll threshold | Update 100px -> 80px to match implementation |
| `LocalizedText` type | Add to design as a recommended helper type |
| `BOOKING_URL` | Add to design or remove from implementation |

---

## 13. Completed Items (2026-02-11)

- [x] Gallery expanded from 6 to 30 items with real photos
- [x] Gallery images reorganized into 6 category-based folders (`digital-perm/`, `color/`, `s-perm/`, `volume-magic/`, `mix-perm/`, `balayage/`)
- [x] Added `GalleryStyle` type and `style` field to `GalleryItem` interface
- [x] Gallery filtering changed from 2 categories (PERM/COLOR) to 6 specific styles
- [x] Gallery filter order set: Hair Color → Volume Magic → Digital Perm → Mix Perm → S Perm → Balayage
- [x] Gallery descriptions unified to English across all 3 locales
- [x] Removed duplicate text display on gallery cards (gold style label removed)
- [x] Services expanded from 8 to 26 items with full pricing data
- [x] Reviews expanded from 4 to 6 items
- [x] Promotions expanded from 1 to 2 items
- [x] basePath removed from `next.config.mjs` (clean config)
- [x] Facebook Graph API feasibility confirmed (auto-gallery-update via hashtag categorization)

## 14. Remaining Next Steps

### 기능 구현
- [ ] ~~Implement `BeforeAfterSlider` component~~ → **불필요** (before 사진 없음, 설계 문서에서 제거 필요)
- [ ] Add OG/Twitter metadata to locale layout (MEDIUM priority)
- [ ] ~~Populate `beforeImage` data in gallery constants~~ → **불필요** (위와 동일)
- [ ] Create `.env.example` file
- [ ] ~~Create GitHub Pages deploy workflow~~ → **완료** (Vercel로 마이그레이션됨)

### LINE Rich Menu 연동 (리치메뉴 → 웹사이트 링크)
| 리치메뉴 버튼 | 필요한 URL | 현재 상태 | 작업 필요 |
|---|---|---|---|
| Welcome Website | `/th` | OK | 없음 |
| Online Booking | `BOOKING_URL` (외부 예약) | OK | 없음 |
| Style / Hair style | `/th/gallery` | OK | 없음 |
| Price List | `/th/services` | OK | 없음 |
| Branch / สาขา | `/th/location` | OK | 없음 |
| Review / รีวิว | `/th#reviews` | ReviewsSection에 `id` 없음 | `id="reviews"` 추가 필요 |

- [ ] ReviewsSection에 `id="reviews"` 추가 (앵커 링크 지원)
- [ ] 커스텀 도메인 연결 (57tb.art → Vercel) — 모든 기능 완성 후 마지막에
- [ ] 리치메뉴 URL 최종 업데이트 (도메인 확정 후 LINE OA 설정)

### 자동화 (미래)
- [ ] Facebook gallery auto-update via n8n (feasibility confirmed)

### PDCA
- [ ] Re-run gap analysis after fixes to confirm >= 90% match rate
- [ ] Generate completion report (`/pdca report 57TB-홈페이지-리뉴얼`)

---

## Version History

| Version | Date | Changes | Author |
|---------|------|---------|--------|
| 1.0 | 2026-02-10 | Initial gap analysis -- 87% match rate | Dylan Kwak (gap-detector) |
| 1.1 | 2026-02-11 | Gallery expansion (6→30 items), style-based filtering (6 styles), image folder reorganization, services/reviews/promotions data expansion, gallery descriptions unified to English, basePath removed, Facebook API feasibility confirmed | Dylan Kwak |
